(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{7889:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth-success",function(){return n(5865)}])},5865:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return AuthSuccess}});var o=n(2676),r=n(5271),c=n(7793);function AuthSuccess(e){let t=(0,c.useRouter)(),n=e.navigateToPage||(e=>{"dashboard"===e?t.replace("/dashboard"):"login"===e?t.replace("/login"):t.replace("/")}),s=e.setUser||(()=>{});return(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("access_token"),o=e.get("id_token");t&&o?(localStorage.setItem("access_token",t),localStorage.setItem("id_token",o),fetch("http://localhost:8080/api/auth/profile",{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>e.json()).then(e=>{console.log("Fetched user profile:",e),localStorage.setItem("user",JSON.stringify(e.user)),s(e.user),n("dashboard")}).catch(e=>{console.error("Error fetching profile:",e),n("login")})):(console.error("No tokens found in URL"),n("login"))},[n,s,t]),(0,o.jsx)("div",{style:{color:"#fff",background:"#191825",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)("h2",{children:"Authenticating..."})})}},7793:function(e,t,n){e.exports=n(1474)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7889)}),_N_E=e.O()}]);