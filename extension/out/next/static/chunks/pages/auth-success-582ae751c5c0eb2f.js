(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{7889:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth-success",function(){return o(5865)}])},5865:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return AuthSuccess}});var n=o(2676),r=o(5271),c=o(7793);function AuthSuccess(e){let t=(0,c.useRouter)(),o=e.navigateToPage||(e=>{"dashboard"===e?t.replace("/dashboard"):"login"===e?t.replace("/login"):t.replace("/")}),s=e.setUser||(()=>{});return(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("access_token"),o=e.get("id_token");t&&o?(localStorage.setItem("access_token",t),localStorage.setItem("id_token",o),fetch("http://localhost:8080/api/auth/profile",{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>e.json()).then(e=>{console.log("Fetched user profile:",e),localStorage.setItem("user",JSON.stringify(e.user)),s(e.user),window.location.href="/dashboard"}).catch(e=>{console.error("Error fetching profile:",e),window.location.href="/login"})):(console.error("No tokens found in URL"),window.location.href="/login")},[o,s,t]),(0,n.jsx)("div",{style:{color:"#fff",background:"#191825",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("h2",{children:"Authenticating..."})})}},7793:function(e,t,o){e.exports=o(1474)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7889)}),_N_E=e.O()}]);