(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{4760:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth-success",function(){return t(248)}])},248:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return a}});var n=t(5893),r=t(7294),c=t(1163);function a(e){let o=(0,c.useRouter)(),t=e.navigateToPage||(e=>{"dashboard"===e?o.replace("/dashboard"):"login"===e?o.replace("/login"):o.replace("/")}),a=e.setUser||(()=>{});return(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),o=e.get("access_token"),t=e.get("id_token");o&&t?(localStorage.setItem("access_token",o),localStorage.setItem("id_token",t),fetch("http://localhost:8080/api/auth/profile",{headers:{Authorization:"Bearer ".concat(o)}}).then(e=>e.json()).then(e=>{console.log("Fetched user profile:",e),localStorage.setItem("user",JSON.stringify(e.user)),a(e.user),window.location.href="/dashboard"}).catch(e=>{console.error("Error fetching profile:",e),window.location.href="/login"})):(console.error("No tokens found in URL"),window.location.href="/login")},[t,a,o]),(0,n.jsx)("div",{style:{color:"#fff",background:"#191825",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("h2",{children:"Authenticating..."})})}},1163:function(e,o,t){e.exports=t(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4760)}),_N_E=e.O()}]);